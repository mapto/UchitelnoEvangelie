# Индекс за Учително Евангелие
Проект с поддържащи инструменти за създаване на индекс с варианти за средновековния ръкопис <a href="https://bg.wikipedia.org/wiki/%D0%A3%D1%87%D0%B8%D1%82%D0%B5%D0%BB%D0%BD%D0%BE_%D0%B5%D0%B2%D0%B0%D0%BD%D0%B3%D0%B5%D0%BB%D0%B8%D0%B5">„Учително евангелие“</a> на Константин Преславски.

Задача на проекта е изработване на пакет от три софтуерни инструмента (програми) с отворен код:
1. exporter.py - За извличане на словоупотребите от оригиналните старобългарски текстови файлове в таблични списъци, които да послужат за основа на база данни, която впоследствие се обогатява и анотира от експертите от екипа.
2. integrator.py с два режима на работа:
2.1. За интерпретиране на анотациите към лексикографските данни от тази база данни и създаване на контролни азбучни индекси с изписване на словоупотребите. Контролните индекси осигуряват обобщен преглед на превода във всяка от двете посоки между старобългарски и гръцки, включително и анотации за алтернативни преводни варианти. Този софтуерен инструмент позволява на екипа от експерти, чрез последователни изпълнения (итерации) да валидира и коригира въведените от тях съдържание и анотации. Самият инструмент на свой ред се доусъвършенства итеративно съвместно с екипа от експерти, за да позволи интерпретирането на по-сложни случаи като словосъчетания, които не са директно преводими или които частично липсват в алтернативните преводни варианти.
2.2. За окончателно оформление на старобългарско-гръцки и гръцко-старобългарски анотирани азбучни индекси, които да бъдат публикувани.

Програмите използват формата <a href="https://en.wikipedia.org/wiki/Office_Open_XML">Office Open XML</a>, който въпреки своята сложност и противоречивост като стандарт, има най добра програмна поддръжка, благодарение на библиотеките <a href="https://github.com/python-openxml/python-docx">python-docx</a> и <a href="https://pypi.org/project/openpyxl">openpyxl</a>.

Разработихме процес със следните стъпки:

1. Дигитализация - дигитализиране на текста на изданието (Transcribus-Achum) и ръчно анотиране на релевантните варианти
2. Извличане - компютърно извличане на текстовия речник в електронна таблица
3. Успоредяване на славянски и гръцки текст – тази и следващите точки са център на доклада ни – как се решават асиметричните случаи
4. Лематизация - добавяне на лематизация към всяка дума в електронната таблица, включително варианти и други анотации
5. Интегриране - компютърна интерпретация на електронната таблица, която подготвя по-сложна версия на окончателния индекс, даваща представа за крайния резултат и същевременно информативна за евентуални корекции 
6. Консолидиране - преглед на интегрирания индекс, тълкуване на несъответствията и тяхното отстраняване чрез поправяне на грешки или адаптиране на анотациите с цел постигане на по-чист резултат
7. Генериране на индекса - компютърно генериране на окончателния речник-индекс, включително форматиране и предпечатна подготовка.

# Изтегляне

В <a href="https://github.com/mapto/UchitelnoEvangelie">GitHub</a> се намира актуалната версия на изходния код.

Изпълними файлове за Linux и Windows могат да бъдат изтеглени от <a href="https://www.dropbox.com/scl/fo/i8e2nl7dbgbprul4fwhr3/h?dl=0&rlkey=gybrbjvxcedeml98g6flv076y">Dropbox</a>.

# Компилиране

За да бъде използвана програмата, тя не е задължително да бъде компилирана. Изпълними файлове могат да бъдат създадени под Linux, MacOSX или Windows Subsystem for Linux.

За компилирането е необходимо да бъде изтеглен кодът и да има инсталирана версия на <a href="https://www.docker.com/">docker</a>. След това трябва да изпълните следната команда от директорията, където сте свалили кода е:

    ./build.sh

Тази команда ще създаде изпълними файлове за Linux и Windows в поддиректорията `dist`.

Алтернативен подход (генериращ изпълними файлове и за Mac) е инсталирането и използването на pyinstaller, например за integrator:

    pip install pyinstaller
    pyinstaller --clean -y --dist ./dist/linux --workpath /tmp integrator.spec

# Използване

Програмата може да се компилира или да се използва с помощта на актуална версия на python (3.6+).

## Интерпретирана версия

За режим без компилация, трябва първо да бъдат инсталирани необходимите библиотеки. Това става с команадата съответно в директорията на всяка от програмите:

    pip install -r requirements.txt

След това програмите се изпълняват с

    python3 extractor.py <docx>
    python3 integrator.py <xlsx>

## Компилирана версия

Ако разполагате с компилираната версия, достатъчно е да пуснете (drag&drop) изходен .DOCX файл върху иконката на изпълнимия файл на extractor. По подобен начин можете да пуснете вече обработен .XLSX файл върху иконата на изпълнимия файл integrator.

Програмата extractor разполага и с команден интерфейс, който може да бъде видян при изпълнение на програмата без параметри. Възможните параметри могат да бъдат видени и в <a href="https://github.com/mapto/UchitelnoEvangelie/blob/master/extractor.py">документацията в кода</a>.

# Авторски права

Този проект се разпространява свободно според <a href="https://mit-license.org/">MIT License</a>.

Използваният типографски шрифт <a href="https://www.starobulglit.eu/OC10U.ttf">*Cyrillica Ochrid 10U*</a> е „раздаван безплатно“ <a href="https://osvedomitel.bg/2020/02/prof-totomanova/">по думите</a> на представител на притежателите на лиценза от БАН.

За създаването на иконата е използван символът <a href="https://fontawesome.com/icons/book-open?style=solid">open-book</a> от FontAwesome, разпространяван под лиценза <a href="https://creativecommons.org/licenses/by/4.0/">Криейтив комънс признание 4.0 международен вариант</a>.

